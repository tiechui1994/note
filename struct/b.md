## B+树 及 B树的区别

首先, 关于什么是 B 树, 或者 B+ 树, 在教科书或者网上有很多相关介绍, 可以直接获取. 但是它们之间的区别, 一般都是理论方面
的, 从数据库应用的角度解释可能更加容易理解. 主要有5点:

- B 树中的同一键值不会出现多次, 它有可能出现在叶子节点上, 也有可能出现在内节点上; 而 B+ 树的键一定会出现在叶子节点上,同
时也有可能在非叶子节点中重复出现. 简单说, B+ 树的内节点存储的都是键值, 键值对应的具体数据都存储在叶子节点上.

- 由于 B 树的每一个节点都存储了真实的数据, 会导致每一个节点存储的数据量变小, 所以整个 B 树的层树就会相对变高, 当数据量变
大之后, 维护代价是比较大的, 而且层数越高, 搜索或者修改的性能就会越低; 而在 B+ 树的内节点中, 只存储键值, 相对而言, 一个
内节点存储的记录数比 B 树多很多. 由于 B+ 树是横向扩展的, 所以随着其中数据量的增长, 最终会成长为一个矮胖子, 不像 B 树一
样是纵向扩展, 最终只会变成一个高个子. 这样整体而言, B+ 树在搜索时, 从上而下直到叶子节点只需要遍历层数个节点而已, 因此性
能比较高.

- B 树的查询效率与键在 B 树中的位置有关, (在叶子节点的时候)最大时间复杂度与B+树相同, 最小时间复杂度为1(在根节点的时候);
而 B+ 树的复杂度对某个建成的树是固定的.

- B 树中, 键的位置不固定, 且在整个树结构中只出现一次, 虽然可以节省存储空间, 但却使得插入, 删除等操作复杂度明显增加. 而
且性能不平衡, 有可能会很快找到合适位置, 也有可能需要做比较多的 IO 操作才能找到. 而 B+ 树相对来说是一种较好的折中, 因为
内节点相对叶子节点而言, 相当于是一个索引, 在插入的过程中, 只需要通过每一层搜索一个节点, 依次找到叶子节点之后, 在叶子节点
处做插入操作即可, 只是在遇到一个节点存储满了的情况下才会进行 B+ 树分裂, 但总体而言性能还是比较稳定.

- B 树中, 所有的数据只存储一份; 而 B+ 树中, 除了存储所有数据的叶子节点外, 还有只存储键值数据的内节点, 所以, 在占用空间
量方面, B+ 树比 B 树会多占用一些空间, 这部分空间就是 B+ 树内部节点的所有空间, 但 B+ 树用过这种方式提高了整体的性能, 更
适合于性能要求很高的文件检索.

