# Token认证

## 认证选择Token的原因

```
相同点: 
    本质上token 和 cookie/session都是字符串.

差异:
    token是自带加密算法和用户信息(比如用户id); cookie本身不包含用户信息,它指向的是服务器上用户的session,而由session保存用户信息. 

结果:
    token可以很容易的跨服务器, 只要不同服务器实现相同解密算法即可; 
    cookie/session是存在于某一台服务器上,要实现跨服务器比较困难,这是任何基于cookie/session应用天生的短板.
```

## Token过期时间参考

```
token, 获取受保护资源的凭证, 必须要设置过期时间. 主流网站token过期时间一般不超过1h
```

## Token过期解决方案

- 方案一:

```
重复第一次获取token的过程(比如登录, 扫描授权等), 这样做的缺点是用户体验不好, 每1小时强制登录一次几乎是无法忍受的.
```

- 方法二:

```
主动刷新Token, 主动刷新token的凭证是refresh token, 也是加密字符串, 并且和token是相关联的. 相比较获取各种资源
的token, refresh token的作用仅仅是获取刷新的token, 因此其作用和安全性都有所降低, 因此其过期时间可以设置长一些.
```
